[gd_scene load_steps=14 format=4 uid="uid://cpl2fu5au2wx2"]

[ext_resource type="PackedScene" uid="uid://b7kytukal1of8" path="res://scenes/daily_cycle.tscn" id="1_f2a5t"]
[ext_resource type="Texture2D" uid="uid://bh5ogjitlddnx" path="res://assets/tile_placeholder.png" id="1_gt07c"]
[ext_resource type="PackedScene" uid="uid://pqugpw34luat" path="res://scenes/actors/player.tscn" id="3_eruj1"]
[ext_resource type="PackedScene" uid="uid://crh318qkn16an" path="res://scenes/ui/thoughts/inventory/ThoughtsInventoryView.tscn" id="3_ms2es"]
[ext_resource type="PackedScene" uid="uid://cjsf8cyf1rfh7" path="res://scenes/player_house.tscn" id="4_1jyyf"]
[ext_resource type="PackedScene" uid="uid://b3rsrqax7mvaa" path="res://scenes/post_picture_screen.tscn" id="6_t6cq8"]
[ext_resource type="Script" uid="uid://bb633akt1q35o" path="res://scripts/post_picture_screen.gd" id="7_cq4yp"]
[ext_resource type="Script" uid="uid://hnxd401h42ti" path="res://scripts/actors/VillagersSystem.gd" id="8_v3ani"]
[ext_resource type="Script" uid="uid://ckcru3sgwqopy" path="res://scripts/actors/VillagersThoughtSystem.gd" id="8_yn4qk"]
[ext_resource type="Resource" uid="uid://bjt30nixo7oef" path="res://resources/thoughts/ThoughtsRepository.tres" id="10_5q1rr"]
[ext_resource type="PackedScene" uid="uid://dvn7budmw0prc" path="res://scenes/actors/villager.tscn" id="11_po04c"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_gt07c"]
texture = ExtResource("1_gt07c")
margins = Vector2i(17, 0)
texture_region_size = Vector2i(222, 256)
0:0/0 = 0
0:0/0/texture_origin = Vector2i(0, -64)
0:1/0 = 0

[sub_resource type="TileSet" id="TileSet_f2a5t"]
tile_shape = 1
tile_layout = 5
tile_size = Vector2i(222, 128)
sources/0 = SubResource("TileSetAtlasSource_gt07c")

[node name="Town" type="Node2D"]
y_sort_enabled = true

[node name="Timer" type="Timer" parent="."]
wait_time = 360.0
autostart = true

[node name="DailyCycle" parent="." instance=ExtResource("1_f2a5t")]

[node name="Background" type="Node2D" parent="."]

[node name="TileMapLayer" type="TileMapLayer" parent="Background"]
tile_map_data = PackedByteArray("AAD9/wMAAAAAAAAAAAD9/wQAAAAAAAAAAAD8/wMAAAAAAAAAAAD8/wIAAAAAAAAAAAD8/wQAAAAAAAAAAAD8/wUAAAAAAAAAAAD9/wUAAAAAAAAAAAD+/wQAAAAAAAAAAAD9/wEAAAAAAAAAAAD9/wIAAAAAAAAAAAD8/wYAAAAAAAAAAAD7/wUAAAAAAAAAAAD//wUAAAAAAAAAAAD//wYAAAAAAAAAAAD+/wYAAAAAAAAAAAD+/wUAAAAAAAAAAAD7/wQAAAAAAAAAAAD7/wMAAAAAAAAAAAD7/wIAAAAAAAAAAAD7/wEAAAAAAAAAAAD6/wIAAAAAAAAAAAD6/wMAAAAAAAAAAAD6/wQAAAAAAAAAAAD6/wUAAAAAAAAAAAD7/wYAAAAAAAAAAAD6/wYAAAAAAAAAAAD5/wYAAAAAAAAAAAD4/wYAAAAAAAAAAAD4/wUAAAAAAAAAAAD4/wQAAAAAAAAAAAD5/wMAAAAAAAAAAAD5/wIAAAAAAAAAAAD5/wEAAAAAAAAAAAD5/wAAAAAAAAAAAAD6/wAAAAAAAAAAAAD6/wEAAAAAAAAAAAD8/wEAAAAAAAAAAAD9/wAAAAAAAAAAAAD8/wAAAAAAAAAAAAD4/wIAAAAAAAAAAAD4/wMAAAAAAAAAAAD5/wQAAAAAAAAAAAD5/wUAAAAAAAAAAAD4/wEAAAAAAAAAAAD3/wIAAAAAAAAAAAD2/wMAAAAAAAAAAAD2/wQAAAAAAAAAAAD2/wUAAAAAAAAAAAD2/wYAAAAAAAAAAAD2/wcAAAAAAAAAAAD2/wgAAAAAAAAAAAD3/wgAAAAAAAAAAAD3/wkAAAAAAAAAAAD4/wkAAAAAAAAAAAD5/wkAAAAAAAAAAAD6/wgAAAAAAAAAAAD+/wkAAAAAAAAAAAD//wgAAAAAAAAAAAD+/wgAAAAAAAAAAAD+/wcAAAAAAAAAAAD9/wcAAAAAAAAAAAD6/wcAAAAAAAAAAAD5/wcAAAAAAAAAAAD4/wcAAAAAAAAAAAD3/wcAAAAAAAAAAAD2/wkAAAAAAAAAAAD1/wkAAAAAAAAAAAD1/woAAAAAAAAAAAD2/woAAAAAAAAAAAD3/woAAAAAAAAAAAD4/woAAAAAAAAAAAD//wcAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAUAAAAAAAAAAAD+////AAAAAAAAAAD/////AAAAAAAAAAD//wAAAAAAAAAAAAD9/wYAAAAAAAAAAAD3/wUAAAAAAAAAAAD3/wYAAAAAAAAAAAD4/wgAAAAAAAAAAAD5/wgAAAAAAAAAAAD5/woAAAAAAAAAAAD0/wkAAAAAAAAAAAD1/wgAAAAAAAAAAAD3/wMAAAAAAAAAAAD3/wQAAAAAAAAAAAD7/wAAAAAAAAAAAAD8////AAAAAAAAAAD9////AAAAAAAAAAD///7/AAAAAAAAAAD+//7/AAAAAAAAAAD9//7/AAAAAAAAAAD+/wEAAAAAAAAAAAD+/wAAAAAAAAAAAAD8//7/AAAAAAAAAAD7//7/AAAAAAAAAAD6//7/AAAAAAAAAAD5//7/AAAAAAAAAAD5////AAAAAAAAAAD4////AAAAAAAAAAD3/wAAAAAAAAAAAAD4/wAAAAAAAAAAAAD3/wEAAAAAAAAAAAD2/wEAAAAAAAAAAAD7////AAAAAAAAAAD6////AAAAAAAAAAD2/wIAAAAAAAAAAAD1/wMAAAAAAAAAAAD1/wQAAAAAAAAAAAD1/wUAAAAAAAAAAAD1/wYAAAAAAAAAAAD1/wcAAAAAAAAAAAABAAAAAAAAAAAAAAABAP//AAAAAAAAAAABAP7/AAAAAAAAAAABAP3/AAAAAAAAAAAAAP3/AAAAAAAAAAD///3/AAAAAAAAAAAAAP7/AAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAAAAAAAAAAACAAEAAAAAAAAAAAACAAIAAAAAAAAAAAABAAQAAAAAAAAAAAD5/wsAAAAAAAAAAAD5/wwAAAAAAAAAAAD6/wwAAAAAAAAAAAD7/wwAAAAAAAAAAAD8/wwAAAAAAAAAAAD//wkAAAAAAAAAAAAAAAcAAAAAAAAAAAABAAUAAAAAAAAAAAACAAMAAAAAAAAAAAADAAIAAAAAAAAAAAADAAEAAAAAAAAAAAAEAAcAAAAAAAAAAAADAAgAAAAAAAAAAAACAAgAAAAAAAAAAAABAAkAAAAAAAAAAAABAAoAAAAAAAAAAAAAAAsAAAAAAAAAAAD//wwAAAAAAAAAAAD//w0AAAAAAAAAAAD+/w0AAAAAAAAAAAD+/wwAAAAAAAAAAAD9/wwAAAAAAAAAAAD//wsAAAAAAAAAAAD//woAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAkAAAAAAAAAAAABAAgAAAAAAAAAAAACAAcAAAAAAAAAAAACAAYAAAAAAAAAAAADAAYAAAAAAAAAAAADAAUAAAAAAAAAAAAEAAUAAAAAAAAAAAAEAAQAAAAAAAAAAAAFAAQAAAAAAAAAAAABAAYAAAAAAAAAAAABAAcAAAAAAAAAAAABAAsAAAAAAAAAAAAAAAwAAAAAAAAAAAD9/w0AAAAAAAAAAAD8/w0AAAAAAAAAAAAAAA0AAAAAAAAAAAABAA0AAAAAAAAAAAACAAwAAAAAAAAAAAADAAwAAAAAAAAAAAAEAAwAAAAAAAAAAAAEAAsAAAAAAAAAAAD8/woAAAAAAAAAAAD8/wkAAAAAAAAAAAD8/wgAAAAAAAAAAAD8/wcAAAAAAAAAAAD7/wcAAAAAAAAAAAD7/wgAAAAAAAAAAAD7/wkAAAAAAAAAAAD6/wkAAAAAAAAAAAD6/woAAAAAAAAAAAD6/wsAAAAAAAAAAAD7/wsAAAAAAAAAAAD7/woAAAAAAAAAAAD8/wsAAAAAAAAAAAD9/wsAAAAAAAAAAAD9/woAAAAAAAAAAAD9/wkAAAAAAAAAAAD9/wgAAAAAAAAAAAD+/woAAAAAAAAAAAD+/wsAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAD//wEAAAAAAAAAAAD//wIAAAAAAAAAAAD+/wIAAAAAAAAAAAD+/wMAAAAAAAAAAAD//wMAAAAAAAAAAAD//wQAAAAAAAAAAAAAAAQAAAAAAAAAAAABAAIAAAAAAAAAAAABAAMAAAAAAAAAAAD1//7/AAAAAAAAAAD1//3/AAAAAAAAAAD0//3/AAAAAAAAAAD0//7/AAAAAAAAAAD0////AAAAAAAAAAD0/wAAAAAAAAAAAAD0/wEAAAAAAAAAAAD0/wIAAAAAAAAAAAD0/wMAAAAAAAAAAAD0/wQAAAAAAAAAAAD0/wUAAAAAAAAAAAD0/wYAAAAAAAAAAAD0/wcAAAAAAAAAAAD0/wgAAAAAAAAAAAD1/wIAAAAAAAAAAAD1/wEAAAAAAAAAAAD1/wAAAAAAAAAAAAD1////AAAAAAAAAAD2////AAAAAAAAAAD2//7/AAAAAAAAAAD2//3/AAAAAAAAAAD3//3/AAAAAAAAAAD3//7/AAAAAAAAAAD3////AAAAAAAAAAD4//7/AAAAAAAAAAD4//3/AAAAAAAAAAD5//3/AAAAAAAAAAD6//3/AAAAAAAAAAD7//3/AAAAAAAAAAD8//3/AAAAAAAAAAD9//3/AAAAAAAAAAD+//3/AAAAAAAAAAD2/wAAAAAAAAAAAAAFAAEAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAP//AAAAAAAAAAAFAP7/AAAAAAAAAAAFAP3/AAAAAAAAAAAEAP3/AAAAAAAAAAADAP3/AAAAAAAAAAACAP3/AAAAAAAAAAACAP7/AAAAAAAAAAACAP//AAAAAAAAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAP//AAAAAAAAAAADAP7/AAAAAAAAAAAEAP7/AAAAAAAAAAAEAP//AAAAAAAAAAAEAAAAAAAAAAAAAAAEAAEAAAAAAAAAAAAEAAIAAAAAAAAAAAAEAAMAAAAAAAAAAAADAAMAAAAAAAAAAAADAAQAAAAAAAAAAAACAAQAAAAAAAAAAAACAAUAAAAAAAAAAAAFAAMAAAAAAAAAAAAFAAIAAAAAAAAAAAAFAAgAAAAAAAAAAAAFAAcAAAAAAAAAAAAFAAYAAAAAAAAAAAAFAAUAAAAAAAAAAAAEAAYAAAAAAAAAAAAEAAgAAAAAAAAAAAAEAAkAAAAAAAAAAAADAAkAAAAAAAAAAAACAAkAAAAAAAAAAAACAAoAAAAAAAAAAAACAAsAAAAAAAAAAAADAAsAAAAAAAAAAAADAAoAAAAAAAAAAAAEAAoAAAAAAAAAAAAFAAoAAAAAAAAAAAAFAAkAAAAAAAAAAAAFAAsAAAAAAAAAAAAFAAwAAAAAAAAAAAAFAA0AAAAAAAAAAAAEAA0AAAAAAAAAAAADAA0AAAAAAAAAAAACAA0AAAAAAAAAAAD2/w0AAAAAAAAAAAD2/wwAAAAAAAAAAAD2/wsAAAAAAAAAAAD1/wsAAAAAAAAAAAD0/wsAAAAAAAAAAAD0/woAAAAAAAAAAAD0/wwAAAAAAAAAAAD0/w0AAAAAAAAAAAD1/w0AAAAAAAAAAAD1/wwAAAAAAAAAAAD3/wsAAAAAAAAAAAD3/wwAAAAAAAAAAAD3/w0AAAAAAAAAAAD4/w0AAAAAAAAAAAD4/wwAAAAAAAAAAAD4/wsAAAAAAAAAAAD5/w0AAAAAAAAAAAD6/w0AAAAAAAAAAAD7/w0AAAAAAAAAAAABAAwAAAAAAAAAAAAAAAgAAAAAAAAAAAADAAcAAAAAAAAAAAD9/w4AAAAAAAAAAAD9/w8AAAAAAAAAAAD9/xAAAAAAAAAAAAD+/w4AAAAAAAAAAAD+/w8AAAAAAAAAAAD+/xAAAAAAAAAAAAD//w4AAAAAAAAAAAD//w8AAAAAAAAAAAD//xAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA8AAAAAAAAAAAAAABAAAAAAAAAAAAABAA4AAAAAAAAAAAABAA8AAAAAAAAAAAABABAAAAAAAAAAAAAGAAUAAAAAAAAAAAAGAAYAAAAAAAAAAAAGAAcAAAAAAAAAAAAGAAgAAAAAAAAAAAAGAAkAAAAAAAAAAAAGAAoAAAAAAAAAAAAGAAsAAAAAAAAAAAAHAAUAAAAAAAAAAAAHAAYAAAAAAAAAAAAHAAcAAAAAAAAAAAAHAAgAAAAAAAAAAAAHAAkAAAAAAAAAAAAHAAoAAAAAAAAAAAAHAAsAAAAAAAAAAAAIAAUAAAAAAAAAAAAIAAYAAAAAAAAAAAAIAAcAAAAAAAAAAAAIAAgAAAAAAAAAAAAIAAkAAAAAAAAAAAAIAAoAAAAAAAAAAAAIAAsAAAAAAAAAAAD6/w4AAAAAAAAAAAD6/w8AAAAAAAAAAAD6/xAAAAAAAAAAAAD7/w4AAAAAAAAAAAD7/w8AAAAAAAAAAAD7/xAAAAAAAAAAAAD8/w4AAAAAAAAAAAD8/w8AAAAAAAAAAAD8/xAAAAAAAAAAAAAGAP7/AAAAAAAAAAAHAP7/AAAAAAAAAAAIAP7/AAAAAAAAAAAGAP3/AAAAAAAAAAAHAP3/AAAAAAAAAAAIAP3/AAAAAAAAAAAHAP//AAAAAAAAAAAHAAAAAAAAAAAAAAAHAAEAAAAAAAAAAAAHAAIAAAAAAAAAAAAIAP//AAAAAAAAAAAIAAAAAAAAAAAAAAAIAAEAAAAAAAAAAAAIAAIAAAAAAAAAAAAGAP//AAAAAAAAAAAGAAAAAAAAAAAAAAAGAAEAAAAAAAAAAAAGAAIAAAAAAAAAAAAGAAMAAAAAAAAAAAAGAAQAAAAAAAAAAAAHAAQAAAAAAAAAAAAIAAQAAAAAAAAAAAAHAAMAAAAAAAAAAAAIAAMAAAAAAAAAAAA=")
tile_set = SubResource("TileSet_f2a5t")

[node name="Node2D" type="Node2D" parent="."]
visible = false
position = Vector2(818, 282)
scale = Vector2(1.20703, 1.20703)

[node name="PlayerHouse" type="Sprite2D" parent="Node2D"]
position = Vector2(-2.48547, 1.65697)
texture = ExtResource("1_gt07c")

[node name="TilePlaceholder" type="Sprite2D" parent="."]
position = Vector2(-1112, -192)
scale = Vector2(2, 2)
texture = ExtResource("1_gt07c")

[node name="UI" type="CanvasLayer" parent="."]

[node name="ThoughtsInventoryView" parent="UI" instance=ExtResource("3_ms2es")]
visible = false
anchors_preset = 15
anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0

[node name="PostPictureScreen" parent="UI" instance=ExtResource("6_t6cq8")]
visible = false
size_flags_horizontal = 4
script = ExtResource("7_cq4yp")

[node name="PlayerHouse" parent="." instance=ExtResource("4_1jyyf")]
position = Vector2(755, 215)

[node name="Player" parent="." instance=ExtResource("3_eruj1")]
position = Vector2(178, 466)
max_speed = 3

[node name="Villagers" type="Node2D" parent="." node_paths=PackedStringArray("villagers")]
y_sort_enabled = true
script = ExtResource("8_v3ani")
villagers = [NodePath("Villager")]

[node name="Systems" type="Node" parent="Villagers"]

[node name="VillagersThoughtSystem" type="Node" parent="Villagers/Systems" node_paths=PackedStringArray("villagers_system")]
script = ExtResource("8_yn4qk")
villagers_system = NodePath("../..")
thoughts_repository = ExtResource("10_5q1rr")
metadata/_custom_type_script = ExtResource("8_yn4qk")

[node name="Villager" parent="Villagers" instance=ExtResource("11_po04c")]
position = Vector2(576, 480)

[connection signal="timeout" from="Timer" to="UI/PostPictureScreen" method="_on_timer_timeout"]
[connection signal="toggleEndDayPrompt" from="PlayerHouse" to="Player" method="_on_player_house_toggle_end_day_prompt"]
[connection signal="endDayCycle" from="Player" to="UI/PostPictureScreen" method="_on_player_end_day_cycle"]
